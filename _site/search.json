[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Reporte regional de atenciones de urgencia 2023 - Chile",
    "section": "",
    "text": "Este reporte fue realizado a partir de los datos abiertos publicados por DEIS en su web sobre atenciones de urgencia en el país. \nLa finalidad de este reporte es facilitar el acceso a la ciudadanía sobre datos y tendencias de evolución en las atenciones de urgencia pediátricas, en particular, en las unidades de urgencia hospitalarias, pues son éstas las que generan aumento de la carga asistencial de las instituciones y hospitalizaciones de pacientes. \nEsta información es especialmente relevante durante los meses de otoño e invierno, dado el aumento de consultas y ciruclación viral en la población. \nPara quienes deseen replicar el código usado para generar las visualizaciones, pueden usar el botón code.\n\n\nCode\n# Libraries\n\nlibrary(tidyverse)\nlibrary(janitor)\nlibrary(DT)\n\n# Get the data\n\nif (!file.exists(\"raw-data/AtencionesUrgencia2023.zip\")) {\n  url &lt;- \"https://repositoriodeis.minsal.cl/SistemaAtencionesUrgencia/AtencionesUrgencia2023.zip\"\n  download.file(url, destfile = \"raw-data/AtencionesUrgencia2023.zip\")\n  unzip(\"raw-data/AtencionesUrgencia2023.zip\", exdir = \"raw-data/\")\n}\n\ndata &lt;- data.table::fread(\"raw-data/AtencionesUrgencia2023.csv\", encoding = \"Latin-1\") |&gt;\n  clean_names()\n\n# Upload official health facility data\n\nhospitals_deis &lt;- readxl:::read_xlsx(\"tables/Establecimientos_Chile_DEIS.xlsx\", skip = 1) |&gt; \n  clean_names()\n\ndata_joined &lt;- left_join(data, hospitals_deis, by = c(\"id_establecimiento\" = \"codigo_antiguo\"))\n\n# select care records for respiratory causes \n\nrespiratory_cause &lt;- data_joined |&gt;\n  filter(\n    glosa_causa == \"TOTAL CAUSAS SISTEMA RESPIRATORIO\",\n    tipo_establecimiento_unidad == \"Hospital\",\n    semana != max(semana)\n  ) |&gt;\n  rowwise() |&gt;\n  mutate(ped = sum(menores_1, de_1_a_4, de_5_a_14)) |&gt;\n  group_by(nombre_region, semana) |&gt;\n  summarise(\n    menores_1 = sum(menores_1),\n    de_1_a_4 = sum(de_1_a_4),\n    de_5_a_14 = sum(de_5_a_14)\n  ) |&gt;\n  pivot_longer(\n    cols = -c(nombre_region, semana),\n    names_to = \"grupo_etario\",\n    values_to = \"n_atenciones\"\n  )\n\nrespiratory_cause$grupo_etario &lt;- factor(respiratory_cause$grupo_etario,\n  labels = c(\"menores_1\", \"de_1_a_4\", \"de_5_a_14\")\n)\n\n\n\nTabla de datos\nLos datos mostrados en la tabla los puedes exportar (Excel, CSV o copiar) desde los botones disponibles para ello.\nLos datos incluyen solo las atenciones registradas a nivel terciario.\n\n\nCode\n# Generate table\n\nDT::datatable(\n  respiratory_cause,\n  filter = \"top\",\n  options = list(\n    orderClasses = FALSE,\n    searching = TRUE,\n    autoWidth = TRUE,\n    pageLength = 15,\n    dom = 'Bfrtip',\n    buttons = c(\"excel\", \"csv\", \"copy\"),\n    initComplete = JS(\n    \"function(settings, json) {\",\n    \"$(this.api().table().header()).css({'background-color': '#f8f9fa', 'color': '#2b2d42'});\",\n    \"}\")\n  ),\n  colnames = c(\"Región\", \"Semana Epi\", \"Grupo Etario\", \"N° Atenciones\"),\n  extensions = \"Buttons\"\n)\n\n\n\n\n\n\n\n\n\nGráficos\n\n\nCode\n# Plots\n\nregions &lt;- unique(respiratory_cause$nombre_region)\n\nfor (region in regions) {\n  data_region &lt;- respiratory_cause[respiratory_cause$nombre_region == region, ]\n\n  plot &lt;- data_region |&gt;\n    ggplot(aes(semana, n_atenciones, fill = grupo_etario)) +\n    geom_area() +\n    scale_x_continuous(breaks = 1:nrow(data_region)) +\n    scale_y_continuous(labels = scales::comma) +\n    scale_fill_manual(\n      values = c(\"#f72585\", \"#7209b7\", \"#7678ed\"),\n      labels = c(\"Menores 1 año\", \"Entre 1 y 4 años\", \"Entre 5 y 14 años\")\n    ) +\n    theme_grey() +\n    labs(\n      title = \"Atenciones de urgencia por causas respiratorias &lt; 14 años. 2023\",\n      subtitle = paste(\"Servicios de urgencia hospitalarios de la\", region, \"\\n\"),\n      x = \"\\nSemana estadística\",\n      y = \"N° de atenciones\",\n      caption = \"Elaborado por Paulo Villarroel | Fuente: Datos abiertos DEIS\",\n      fill = \"Grupo etario\"\n    ) +\n    theme(\n      plot.title = element_text(size = 22, face = \"bold\"),\n      plot.subtitle = element_text(size = 16),\n      axis.text.x = element_text(size = 12),\n      axis.text.y = element_text(size = 12),\n      plot.background = element_rect(fill = \"#e9ecef\"),\n      panel.background = element_blank(),\n      panel.grid.major = element_line(color = \"#ced4da\", linewidth = 0.2),\n      panel.grid.minor = element_line(color = \"#ced4da\", linewidth = 0.2),\n      legend.background = element_blank(),\n      axis.ticks = element_blank()\n    )\n\n  cat(\"##\", region, \"\\n\")\n  print(plot)\n}\n\n\n## Región De Antofagasta \n\n\n\n\n\n## Región De Arica Parinacota \n\n\n\n\n\n## Región De Atacama \n\n\n\n\n\n## Región De Aysén del General Carlos Ibañez del Campo \n\n\n\n\n\n## Región De Coquimbo \n\n\n\n\n\n## Región De La Araucanía \n\n\n\n\n\n## Región De Los Lagos \n\n\n\n\n\n## Región De Los Ríos \n\n\n\n\n\n## Región De Magallanes y de la Antártica Chilena \n\n\n\n\n\n## Región De Tarapacá \n\n\n\n\n\n## Región De Valparaíso \n\n\n\n\n\n## Región De Ñuble \n\n\n\n\n\n## Región Del Bíobío \n\n\n\n\n\n## Región Del Libertador Gral. B. O'Higgins \n\n\n\n\n\n## Región Del Maule \n\n\n\n\n\n## Región Metropolitana de Santiago"
  }
]